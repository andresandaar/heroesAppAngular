<div class="flex flex-column gap-1">

  <span class="text-lg mb-4">Registro</span>
  <form [formGroup]="myForm" (ngSubmit)="onSubmit()" autocomplete="off" class="flex flex-column gap-1">
    <mat-form-field>
      <mat-label>Nombres</mat-label>
      <input type="text" matInput placeholder="Nombres del usuario" formControlName="name">
      <mat-error *ngIf="isValidField('name')">
        {{getFieldError('name')}}
      </mat-error>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Apellidos</mat-label>
      <input type="text" matInput placeholder="Apellidos" formControlName="surname">
        <mat-error *ngIf="isValidField('surname')">
          {{getFieldError('surname')}}
        </mat-error>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Cual es tu rol </mat-label>
      <mat-select required="" formControlName="role">
        <mat-option *ngFor="let rol of roles" [value]="rol.type">{{rol.type}}</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Correo electronico</mat-label>
      <input type="email" matInput placeholder="Ex. pat@example.com" formControlName="email">
        <mat-error *ngIf="isValidField('email')">
          {{getFieldError('email')}}
        </mat-error>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Crea una contraseña</mat-label>
      <input type="password" matInput placeholder="Contraseña" [type]="visiblePass  ? 'password' : 'text'"
        formControlName="password">
      <button mat-icon-button matSuffix (click)="visiblePass = !visiblePass" [attr.aria-label]="'Hide password'"
        [attr.aria-pressed]="visiblePass">
        <mat-icon>{{visiblePass ? 'visibility_off' : 'visibility'}}</mat-icon>
      </button>
    <mat-error *ngIf="isValidField('password')">
      {{getFieldError('password')}}
    </mat-error>
    </mat-form-field>
  </form>

  <button mat-button mat-flat-button color="primary" (click)="onSubmit()">
    <mat-icon>save</mat-icon>Crear cuenta
  </button>
  <div class="flex justify-content-end mt-5"><a routerLink="/auth/login">¿Ya tienes cuenta?</a></div>

</div>
<mat-error *ngIf="error">
  {{error}}
</mat-error>

<ngx-spinner type="square-jelly-box"></ngx-spinner>
